# Cursor AI Rules - Next.js + shadcn/ui Template

## Core Principles

1. **SOLID Principles** - Single responsibility, Open/closed, Liskov substitution, Interface segregation, Dependency inversion
2. **Clean Code** - Meaningful names, small functions, no code duplication, JSDoc comments
3. **Type Safety** - Strict TypeScript, no any types, proper error handling, type-only imports
4. **Next.js Patterns** - App Router, Server Components by default, proper data fetching

---

## Component Rules

- Components in `components/ui/` must follow shadcn/ui patterns
- Use `class-variance-authority (cva)` for variants
- Always use `React.forwardRef` for props ref forwarding
- Extend HTMLButtonAttributes or equivalent for props
- Export component and variants separately
- Use `cn()` from `@/lib/utils` for className merging
- One component per file
- Keep components under 150 lines

---

## Import Order (Enforced by ESLint)

1. React/Next.js imports
2. Third-party library imports
3. Internal imports (`@/components`, `@/lib`, `@/hooks`, `@/types`, `@/config`)
4. Parent relative imports
5. Sibling relative imports
6. Type-only imports (`import type`)

---

## Type Safety Rules

- Use `import type { ... }` for type-only imports
- Reuse types from `@/types` (`ApiResponse`, `PaginatedResponse`, `AsyncState`)
- Define component props interfaces extending HTML attributes
- Use generics for reusable components
- Add JSDoc comments for utilities
- **Never use `any`** - use proper TypeScript types

---

## File Naming

- Components: PascalCase (Button.tsx, UserProfile.tsx)
- Utilities: camelCase (formatDate.ts, debounce.ts)
- Hooks: camelCase with 'use' prefix (useAuth.ts, useForm.ts)
- Types: camelCase or index.ts for barrels
- Constants: camelCase (constants.ts, env.ts)

---

## Utility Functions

**Check `@/lib/utils` before creating new utilities**

Existing utilities:
- `cn` - Merge Tailwind classes
- `formatDate` - Format dates with locale
- `formatCurrency` - Format currency with locale
- `formatNumber` - Format numbers with locale
- `truncate` - Truncate text with ellipsis
- `debounce` - Debounce functions

Add JSDoc with `@param` and `@returns` for new utilities
Use TypeScript generics for reusability

---

## Constants

**Check `@/lib/constants` before defining constants**

Groups:
- `HttpStatus` - HTTP status codes (200, 404, 500, etc.)
- `ENV` - Environment values (development, production, test)
- `PAGINATION` - Pagination defaults
- `CURRENCY` - Currency codes (USD, EUR, etc.)
- `LOCALE` - Locale codes (en-US, de-DE, etc.)
- `REGEX` - Regex patterns (email, URL, phone, slug)
- `STORAGE_KEY` - localStorage keys
- `EVENT` - Analytics event names
- `ERROR_CODE` - Error code constants
- `TIME` - Time in milliseconds
- `DEBOUNCE` - Debounce timing defaults
- `THEME` - Theme values (light, dark, system)

Use `as const` for readonly objects

---

## API Routes

- Use `ApiResponse<T>` for success responses
- Use `ApiError` for error responses
- Use `HttpStatus` from `@/lib/constants` for status codes
- Validate request data with proper types
- Handle errors with try-catch and proper status codes
- Return appropriate status codes (200, 201, 400, 401, 404, 500)

---

## Environment Variables

- Import from `@/config/env` (`publicEnv`, `serverEnv`, `isDevelopment`)
- Define new env vars in `config/env.ts` with validation
- **Never use `process.env` directly in components**
- Use `getOptionalEnv()` or `_getRequiredEnv()` helpers

---

## Clean Code Limits (Enforced by ESLint)

- Complexity: 10
- Max depth: 4
- Max params: 4
- Max lines per function: 150
- Use `console.warn/error` only (no `console.log`)

---

## Next.js Best Practices

- Default to Server Components (no 'use client')
- Use 'use client' only for interactivity/hooks
- Use async/await for data fetching
- Implement `loading.tsx` and `error.tsx` for routes
- Use `<Link>` from `next/link` for navigation
- Use App Router patterns (`layout.tsx`, `page.tsx`, `loading.tsx`, `error.tsx`)

---

## Git Workflow

- Conventional commits: `feat(scope): description`
- Commit types: feat, fix, docs, style, refactor, perf, test, build, ci, chore
- Run `pnpm lint:fix` before committing
- Run `pnpm typecheck` before committing
- Pre-commit hooks auto-format and lint

---

## Prohibited Patterns

- No `any` types
- No `process.env` in components (use `@/config/env`)
- No `console.log` (use `console.warn/error`)
- No duplicate utility functions (check `@/lib/utils`)
- No hardcoded constants (use `@/lib/constants`)
- No inline styles (use Tailwind classes)
- No multiple components in one file
- No missing error handling (always use try-catch)
- No missing types (type all props, returns, variables)
- No breaking ESLint rules (fix all linting issues)

---

## SOLID Principles Quick Reference

**Single Responsibility** - One function/component = one responsibility
**Open/Closed** - Use cva for variants, extend for flexibility
**Liskov Substitution** - Properly extend base props
**Interface Segregation** - Split large interfaces
**Dependency Inversion** - Depend on abstractions, not concretions
